<header>
  <div class="navigation">
    <a routerLink="/">
      <img src="/assets/images/logo-mobile.svg" alt="" class="logo-mobile" />
      <img src="/assets/images/logo-dark.svg" alt="" class="logo-desktop" />
    </a>

    <h1 *ngIf="currentBoard; else defaultDesktopView" class="desktop-title">
      {{ currentBoard.name }}
    </h1>
    <ng-template #defaultDesktopView>
      <h1 class="desktop-title">Select a board</h1>
    </ng-template>

    <button
      *ngIf="boards?.length"
      type="button"
      (click)="headerService.onNavClick()"
      class="mobile-nav-button"
    >
      <h1 *ngIf="currentBoard; else defaultMobileView">
        {{ currentBoard.name }}
      </h1>
      <ng-template #defaultMobileView>
        <h1 class="mobile-nav-button">Select a board</h1>
      </ng-template>
      <img
        src="/assets/images/icon-chevron-down.svg"
        alt=""
        [ngClass]="{ active: headerService.showNav }"
      />
    </button>

    <div
      class="nav-mobile-menu"
      *ngIf="headerService.showNav && boards?.length"
    >
      <app-nav-menu [boards]="boards"></app-nav-menu>
    </div>
  </div>
  <div class="actions">
    <app-button
      [buttonStyle]="['small']"
      (click)="headerService.onAddTaskClick()"
      [disabled]="!currentBoard"
      class="add-task-button"
    >
      <img src="/assets/images/icon-add-task-mobile.svg" alt="" />
      <span>+ add new task</span>
    </app-button>

    <div class="menu-container">
      <button type="button" (click)="headerService.onMenuClick()">
        <img src="/assets/images/icon-vertical-ellipsis.svg" alt="" />
      </button>

      <app-menu
        *ngIf="headerService.showMenu && currentBoard"
        type="board"
        (edit)="headerService.onEditClick(currentBoard)"
        (delete)="headerService.onDeleteClick(currentBoard)"
      ></app-menu>
    </div>
  </div>

  <button class="show-sidebar" (click)="headerService.onShowSidebarClick()">
    <img src="/assets/images/icon-show-sidebar.svg" alt="" />
  </button>

  <aside [ngClass]="{ sidebar: true, open: headerService.showSidebar }">
    <app-nav-menu [boards]="boards"></app-nav-menu>
  </aside>
</header>

<app-modal
  *ngIf="modalService.modal === currentBoard?.id + ' delete'"
  header="Delete this board?"
>
  <app-delete-menu>
    Are you sure you want to delete the ‘{{ currentBoard?.name }}’ board? This
    action will remove all columns and tasks and cannot be reversed.
  </app-delete-menu>
</app-modal>

<app-modal
  *ngIf="modalService.modal === currentBoard?.id + ' edit'"
  header="Edit Board"
  (dismiss)="modalService.closeModal()"
>
  <app-edit-board [board]="currentBoard"></app-edit-board>
</app-modal>

<app-modal
  *ngIf="modalService.modal === 'add-board'"
  header="Add New Board"
  (dismiss)="modalService.closeModal()"
>
  <app-add-board></app-add-board>
</app-modal>

<app-modal
  *ngIf="modalService.modal === 'add-task'"
  header="Add New Task"
  (dismiss)="modalService.closeModal()"
>
  <app-add-task [board]="currentBoard"></app-add-task>
</app-modal>
